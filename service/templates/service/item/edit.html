{% extends 'admin_site/layout.html' %}
{% block 'main' %}
{% load static %}

<div class="pagetitle">
    <h1>Edit Service Item</h1>
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'admin_dashboard' %}">Home</a></li>
            <li class="breadcrumb-item">Services</li>
            <li class="breadcrumb-item"><a href="{% url 'service_item_list' %}">Inventory</a></li>
            <li class="breadcrumb-item"><a href="{% url 'service_item_detail' form.instance.pk %}">Details</a></li>
            <li class="breadcrumb-item active">Edit</li>
        </ol>
    </nav>
</div><!-- End Page Title -->

<section class="section">
    <div class="row">
        <div class="col-lg-10">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Editing: {{ form.instance.name }}</h5>
                    <p>Update the details for this item below. To change stock levels, please use the "Manage Stock" feature on the detail page.</p>

                    {% include 'admin_site/partials/error.html' %}

                    <form method="post" class="row g-3">
                        {% csrf_token %}

                        <!-- Basic Information Section -->
                        <div class="col-12">
                            <h6 class="card-subtitle mb-2 text-muted">Basic Information</h6>
                            <hr>
                        </div>

                        <div class="col-md-8">
                            <div class="form-floating">
                                {{ form.name }}
                                <label for="{{ form.name.id_for_label }}">Item Name <span class="text-danger">*</span></label>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-floating">
                                {{ form.category }}
                                <label for="{{ form.category.id_for_label }}">Category <span class="text-danger">*</span></label>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="form-floating">
                                {{ form.description }}
                                <label for="{{ form.description.id_for_label }}">Description</label>
                            </div>
                        </div>

                        <div class="col-md-6">
                             <div class="form-floating">
                                {{ form.model_number }}
                                <label for="{{ form.model_number.id_for_label }}">Model / Brand</label>
                            </div>
                        </div>

                         <div class="col-md-6">
                            <div class="form-floating">
                                {{ form.unit_of_measure }}
                                <label for="{{ form.unit_of_measure.id_for_label }}">Unit of Measure</label>
                            </div>
                        </div>


                        <!-- Pricing & Stock Section -->
                        <div class="col-12 mt-4">
                            <h6 class="card-subtitle mb-2 text-muted">Pricing & Stock</h6>
                            <hr>
                        </div>

                        <div class="col-md-6">
                            <div class="form-floating">
                                {{ form.price }}
                                <label for="{{ form.price.id_for_label }}">Selling Price <span class="text-danger">*</span></label>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-floating">
                                {{ form.cost_price }}
                                <label for="{{ form.cost_price.id_for_label }}">Cost Price (Optional)</label>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-floating">
                                {{ form.minimum_stock_level }}
                                <label for="{{ form.minimum_stock_level.id_for_label }}">Minimum Stock Level (Reorder Point)</label>
                            </div>
                             <div class="form-text">
                                You will be alerted when stock falls to this level.
                            </div>
                        </div>


                        <!-- Additional Details Section -->
                        <div class="col-12 mt-4">
                            <h6 class="card-subtitle mb-2 text-muted">Additional Details</h6>
                            <hr>
                        </div>
                         <div class="col-md-6">
                            <div class="form-floating">
                                {{ form.expiry_date }}
                                <label for="{{ form.expiry_date.id_for_label }}">Expiry Date</label>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="form-check form-switch mb-2">
                                {{ form.is_prescription_required }}
                                <label class="form-check-label" for="{{ form.is_prescription_required.id_for_label }}">Is Prescription Required?</label>
                            </div>
                            <div class="form-check form-switch">
                                {{ form.is_active }}
                                <label class="form-check-label" for="{{ form.is_active.id_for_label }}">Is Active?</label>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="text-end mt-4">
                            <a href="{% url 'service_item_detail' form.instance.pk %}" class="btn btn-secondary">Cancel</a>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}
