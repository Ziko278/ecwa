# Generated by Django 5.0 on 2025-08-25 14:16

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('human_resource', '0002_alter_hodmodel_deputy_hod'),
        ('patient', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ConsultationBlockModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, unique=True)),
                ('description', models.TextField(blank=True)),
            ],
            options={
                'db_table': 'consultation_blocks',
            },
        ),
        migrations.CreateModel(
            name='ConsultationFeeModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('patient_category', models.CharField(choices=[('regular', 'Regular Patient'), ('insurance', 'Insurance Patient')], default='regular', max_length=20)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('duration_minutes', models.IntegerField(default=20)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'consultation_fees',
            },
        ),
        migrations.CreateModel(
            name='ConsultationSettingsModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('auto_assign_queue_numbers', models.BooleanField(default=True)),
                ('max_queue_size_per_doctor', models.IntegerField(default=50)),
                ('default_consultation_duration', models.IntegerField(default=20, help_text='Minutes')),
                ('vitals_timeout_minutes', models.IntegerField(default=30, help_text='Max time for vitals')),
                ('consultation_timeout_hours', models.IntegerField(default=2, help_text='Max consultation time')),
                ('default_insurance_coverage_percent', models.IntegerField(default=70)),
                ('send_queue_notifications', models.BooleanField(default=True)),
                ('send_vitals_reminders', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'consultation_settings',
            },
        ),
        migrations.CreateModel(
            name='SpecializationModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('code', models.CharField(blank=True, max_length=10, unique=True)),
                ('description', models.TextField(blank=True)),
                ('base_consultation_fee', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'specializations',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='ConsultationPaymentModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('amount_due', models.DecimalField(decimal_places=2, max_digits=10)),
                ('amount_paid', models.DecimalField(decimal_places=2, max_digits=10)),
                ('balance', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('insurance_coverage', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('patient_portion', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('transaction_id', models.CharField(blank=True, max_length=100, unique=True)),
                ('payment_method', models.CharField(choices=[('cash', 'Cash'), ('card', 'Card'), ('transfer', 'Transfer'), ('insurance', 'Insurance')], default='cash', max_length=20)),
                ('status', models.CharField(choices=[('pending', 'Pending Payment'), ('partial', 'Partially Paid'), ('paid', 'Fully Paid'), ('overpaid', 'Overpaid')], default='pending', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('paid_at', models.DateTimeField(blank=True, null=True)),
                ('fee_structure', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='consultation.consultationfeemodel')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='consultation_payments', to='patient.patientmodel')),
                ('processed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='consultation_processed_payments', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'consultation_payments',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ConsultationRoomModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('is_active', models.BooleanField(default=True)),
                ('capacity', models.IntegerField(default=1, help_text='Number of doctors that can use this room')),
                ('block', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='rooms', to='consultation.consultationblockmodel')),
                ('specialization', models.ForeignKey(blank=True, help_text='Primary specialization for this room', null=True, on_delete=django.db.models.deletion.SET_NULL, to='consultation.specializationmodel')),
            ],
            options={
                'db_table': 'consultation_rooms',
                'unique_together': {('name', 'block')},
            },
        ),
        migrations.CreateModel(
            name='ConsultantModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('default_consultation_duration', models.IntegerField(default=20, help_text='Minutes per consultation')),
                ('max_daily_patients', models.IntegerField(default=30, help_text='Maximum patients per day')),
                ('is_available_for_consultation', models.BooleanField(default=True)),
                ('consultation_days', models.CharField(default='mon,tue,wed,thu,fri', help_text='Comma-separated: mon,tue,wed,thu,fri,sat,sun', max_length=20)),
                ('consultation_start_time', models.TimeField(default='08:00')),
                ('consultation_end_time', models.TimeField(default='16:00')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('staff', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='consultant_profile', to='human_resource.staffmodel')),
                ('assigned_room', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='consultants', to='consultation.consultationroommodel')),
                ('specialization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='consultation.specializationmodel')),
            ],
            options={
                'db_table': 'consultants',
            },
        ),
        migrations.CreateModel(
            name='PatientQueueModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('waiting_vitals', 'Waiting for Vitals'), ('vitals_done', 'Vitals Completed - Waiting for Doctor'), ('with_doctor', 'With Doctor'), ('consultation_paused', 'Consultation Paused'), ('consultation_completed', 'Consultation Completed'), ('cancelled', 'Cancelled')], default='waiting_vitals', max_length=25)),
                ('queue_number', models.CharField(blank=True, max_length=20, unique=True)),
                ('joined_queue_at', models.DateTimeField(auto_now_add=True)),
                ('vitals_started_at', models.DateTimeField(blank=True, null=True)),
                ('vitals_completed_at', models.DateTimeField(blank=True, null=True)),
                ('consultation_started_at', models.DateTimeField(blank=True, null=True)),
                ('consultation_ended_at', models.DateTimeField(blank=True, null=True)),
                ('is_emergency', models.BooleanField(default=False)),
                ('priority_level', models.IntegerField(default=0, help_text='0=Normal, 1=High, 2=Emergency')),
                ('notes', models.TextField(blank=True)),
                ('consultant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='consultation.consultantmodel')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='patient.patientmodel')),
                ('payment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='consultation.consultationpaymentmodel')),
                ('vitals_nurse', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='vitals_queue', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'patient_queue',
                'ordering': ['priority_level', 'joined_queue_at'],
            },
        ),
        migrations.CreateModel(
            name='ConsultationSessionModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('chief_complaint', models.TextField(help_text='Main reason for visit')),
                ('history_of_present_illness', models.TextField(blank=True)),
                ('past_medical_history', models.TextField(blank=True)),
                ('physical_examination', models.TextField(blank=True)),
                ('assessment', models.TextField(blank=True, help_text='Clinical assessment/impression')),
                ('diagnosis', models.TextField(blank=True)),
                ('treatment_plan', models.TextField(blank=True)),
                ('medications_prescribed', models.TextField(blank=True)),
                ('investigations_ordered', models.TextField(blank=True)),
                ('follow_up_instructions', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('in_progress', 'In Progress'), ('paused', 'Paused'), ('completed', 'Completed')], default='in_progress', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('queue_entry', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='consultation', to='consultation.patientqueuemodel')),
            ],
            options={
                'db_table': 'consultation_sessions',
            },
        ),
        migrations.CreateModel(
            name='PatientVitalsModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('temperature', models.DecimalField(blank=True, decimal_places=1, help_text='°C', max_digits=4, null=True)),
                ('blood_pressure_systolic', models.IntegerField(blank=True, null=True)),
                ('blood_pressure_diastolic', models.IntegerField(blank=True, null=True)),
                ('pulse_rate', models.IntegerField(blank=True, help_text='BPM', null=True)),
                ('respiratory_rate', models.IntegerField(blank=True, help_text='per minute', null=True)),
                ('oxygen_saturation', models.IntegerField(blank=True, help_text='SpO2 %', null=True)),
                ('height', models.DecimalField(blank=True, decimal_places=2, help_text='cm', max_digits=5, null=True)),
                ('weight', models.DecimalField(blank=True, decimal_places=2, help_text='kg', max_digits=5, null=True)),
                ('bmi', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True)),
                ('general_appearance', models.TextField(blank=True)),
                ('chief_complaint', models.TextField(blank=True, help_text='What patient is complaining of')),
                ('recorded_at', models.DateTimeField(auto_now_add=True)),
                ('notes', models.TextField(blank=True)),
                ('queue_entry', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='vitals', to='consultation.patientqueuemodel')),
                ('recorded_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='recorded_vitals', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'patient_vitals',
            },
        ),
        migrations.AddField(
            model_name='consultationfeemodel',
            name='insurance',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='insurance', to='consultation.specializationmodel'),
        ),
        migrations.AddField(
            model_name='consultationfeemodel',
            name='specialization',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fees', to='consultation.specializationmodel'),
        ),
        migrations.CreateModel(
            name='DoctorScheduleModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField()),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField()),
                ('max_patients', models.IntegerField(default=20)),
                ('current_bookings', models.IntegerField(default=0)),
                ('is_available', models.BooleanField(default=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('consultant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='schedules', to='consultation.consultantmodel')),
            ],
            options={
                'db_table': 'doctor_schedules',
                'ordering': ['date', 'start_time'],
                'unique_together': {('consultant', 'date')},
            },
        ),
        migrations.AlterUniqueTogether(
            name='consultationfeemodel',
            unique_together={('specialization', 'patient_category')},
        ),
    ]
