{% extends 'admin_site/layout.html' %}
{% block 'main' %}
{% load static %}

<div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
        <div class="card-body">
            <h4 class="card-title">Delete Lab Test Template</h4>
            <p>Template: <i>{{ template.name|upper }}</i></p>

            <p>The Lab Test Template will be permanently deleted.</p>

            {% if template.test_parameters %}
                <p><b>Note:</b> This template has defined parameters that will no longer be available for future orders.</p>
            {% else %}
                <p>This template does not have specific parameters defined.</p>
            {% endif %}

            {% if template.labtestordermodel_set.all|length > 0 %}
                <p>
                    <span class="text-danger">{{ template.labtestordermodel_set.all|length }}</span>
                    order{{ template.labtestordermodel_set.all|length|pluralize }} are linked to this template.
                    Deleting it will not remove existing orders but may affect references.
                </p>
            {% else %}
                <p>There are currently no orders linked to this template.</p>
            {% endif %}

            <form method="post" style="display:inline">
                {% csrf_token %}
                <button class="btn btn-success">Proceed</button>
            </form>
            <a href="{% url 'lab_template_index' %}" class="btn btn-danger">Cancel</a>
        </div>
    </div>
</div>

{% endblock %}
